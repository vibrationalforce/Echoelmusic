# Skip Configuration for Echoelmusic
# Skip Framework: https://skip.tools
# Enables building native Android apps from Swift/SwiftUI code

# Skip version requirement
skip:
  version: "1.5.0"

# Project configuration
project:
  name: Echoelmusic
  bundle_id: com.echoelmusic.app

  # iOS target (source of truth)
  ios:
    deployment_target: "15.0"
    scheme: Echoelmusic

  # Android target (transpiled from Swift)
  android:
    min_sdk: 26  # Android 8.0
    target_sdk: 34
    compile_sdk: 34
    package: com.echoelmusic.app

# Module mapping
# Which Swift modules to transpile to Kotlin
modules:
  # Core modules (fully supported)
  - name: EchoelmusicCore
    swift_path: Sources/Echoelmusic/Core
    kotlin_path: android/app/src/main/kotlin/com/echoelmusic/core

  - name: EchoelmusicAudio
    swift_path: Sources/Echoelmusic/Audio
    kotlin_path: android/app/src/main/kotlin/com/echoelmusic/audio

  - name: EchoelmusicVisual
    swift_path: Sources/Echoelmusic/Visual
    kotlin_path: android/app/src/main/kotlin/com/echoelmusic/visual

# Platform-specific exclusions
# These use Apple-only frameworks and need Android alternatives
exclusions:
  - path: Sources/Echoelmusic/Biofeedback/HealthKitManager.swift
    reason: "HealthKit is iOS-only, use Health Connect on Android"
    android_alternative: android/app/src/main/kotlin/com/echoelmusic/health/HealthConnectManager.kt

  - path: Sources/Echoelmusic/Spatial/ARFaceTrackingManager.swift
    reason: "ARKit is iOS-only, use ARCore on Android"
    android_alternative: android/app/src/main/kotlin/com/echoelmusic/ar/ARCoreManager.kt

  - path: Sources/Echoelmusic/VisionOS/**
    reason: "visionOS-specific code"

  - path: Sources/Echoelmusic/WatchOS/**
    reason: "watchOS-specific code"

  - path: Sources/Echoelmusic/Widgets/**
    reason: "iOS Widgets, need Android Widgets separately"

# SwiftUI to Compose mapping
# Skip handles most automatically, but some need hints
ui_mapping:
  # Custom view mappings
  views:
    CoherenceGaugeView: "Use Canvas composable"
    WaveformView: "Use Canvas composable"

# Build settings
build:
  # Generate Kotlin from Swift
  transpile: true

  # Generate Android Studio project
  android_studio_project: true

  # Output directory for Android build
  output_dir: "build/android"

# Dependencies
# Android-specific dependencies needed
android_dependencies:
  implementation:
    - "androidx.compose.ui:ui:1.6.0"
    - "androidx.compose.material3:material3:1.2.0"
    - "androidx.health.connect:connect-client:1.1.0"
    - "com.google.ar:core:1.42.0"
    - "androidx.media3:media3-exoplayer:1.3.0"

  # For biometric authentication
    - "androidx.biometric:biometric:1.1.0"
