# üìã Instructions for ChatGPT Codex

**Hey ChatGPT Codex!** üëã

Claude Code hat **Week 1 des ECHOELMUSIC-Projekts** fertig implementiert und braucht jetzt dein Debug/Optimize-Expertenwissen.

---

## üéØ DEINE AUFGABE

Bitte f√ºhre ein **vollst√§ndiges Performance & Code Quality Review** durch f√ºr:

- **UnifiedControlHub** (60 Hz control loop)
- **ARFaceTrackingManager** (ARKit face tracking)
- **FaceToAudioMapper** (facial expressions ‚Üí audio parameters)

---

## üìÇ RELEVANTE FILES

**Lies diese Files zuerst:**

1. **`.github/HANDOFF_TO_CODEX_WEEK1.md`** ‚Üê **HAUPTDOKUMENT (START HIER!)**
   - Vollst√§ndige Aufgabenbeschreibung
   - Areas of Concern (was zu testen ist)
   - Performance Targets
   - Reporting Format

2. **Implementation Files:**
   - `Sources/Echoelmusic/Unified/UnifiedControlHub.swift`
   - `Sources/Echoelmusic/Spatial/ARFaceTrackingManager.swift`
   - `Sources/Echoelmusic/Unified/FaceToAudioMapper.swift`

3. **Tests:**
   - `Tests/BlabTests/UnifiedControlHubTests.swift`
   - `Tests/BlabTests/FaceToAudioMapperTests.swift`

4. **Architecture:**
   - `BLAB_EXTENDED_VISION.md`
   - `BLAB_90_DAY_ROADMAP.md`

---

## ‚úÖ DEIN REVIEW SOLL ENTHALTEN:

### 1. **Performance Metrics:**
- Control loop frequency (Ziel: 60 Hz ¬±5)
- CPU usage (Ziel: < 20%)
- Memory usage (Ziel: < 100 MB)

### 2. **Memory Leak Analysis:**
- Instruments Leaks Report
- Memory growth over time
- Retain cycles (especially Combine pipelines)

### 3. **Thread Safety:**
- Thread Sanitizer warnings
- @MainActor usage korrekt?
- Data races?

### 4. **Code Quality:**
- Refactoring suggestions
- Code smells
- Best practices violations

### 5. **Optimization Recommendations:**
- Bottlenecks identified
- Performance improvements
- Estimated gains

---

## üõ†Ô∏è TOOLS DIE DU NUTZEN SOLLTEST:

**Xcode Instruments:**
- Time Profiler (CPU)
- Allocations (Memory)
- Leaks (Memory Leaks)
- System Trace (Threads)

**Xcode Diagnostics:**
- Thread Sanitizer
- Address Sanitizer
- Undefined Behavior Sanitizer

---

## üìä REPORTING FORMAT

**Nutze das Format aus `.github/HANDOFF_TO_CODEX_WEEK1.md`:**

```markdown
# ChatGPT Codex Review ‚Äî Week 1 Implementation

## Performance Metrics
- Control Loop Frequency: X Hz (‚úÖ/‚ùå)
- CPU Usage: X% (‚úÖ/‚ùå)
- Memory Usage: X MB (‚úÖ/‚ùå)

## Memory Leak Analysis
[...]

## Thread Safety
[...]

## Code Quality
[...]

## Optimization Recommendations
[...]

## Overall Assessment
**Status:** ‚úÖ Ready / ‚ö†Ô∏è Needs fixes / ‚ùå Blocking

**Recommendation:** [Proceed to Week 2 / Fix issues first]
```

---

## üöÄ NACH DEINEM REVIEW:

- ‚úÖ **Green:** Claude Code startet Week 2 (Hand Tracking)
- ‚ö†Ô∏è **Yellow:** Claude Code fixt Issues ‚Üí Week 2
- ‚ùå **Red:** Major Refactoring needed

---

## ‚ö†Ô∏è WICHTIGE INFO:

**Build Environment:**
- Projekt kann NUR auf **macOS mit Xcode 15+** gebaut werden
- Linux Container hat kein Swift ‚Üí nutze lokale macOS-Umgebung
- Test auf **iPhone 13 Pro** (oder neuer) f√ºr Performance-Baseline
- ARKit braucht **iPhone X+** (TrueDepth camera)

---

## üìû FRAGEN?

Falls etwas unklar ist:
- Frag den User, er leitet es an Claude Code weiter
- Referenziere File:Line Numbers
- Include Code-Snippets

---

**LOS GEHT'S!** üîç

Viel Erfolg beim Review! üöÄ

---

**Generated by:** Claude Code
**For:** ChatGPT Codex
**Project:** ECHOELMUSIC
**Date:** 2025-10-21
