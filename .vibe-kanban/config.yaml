# Vibe Kanban Configuration for Echoelmusic
# Orchestrate multiple AI coding agents in parallel
# https://github.com/BloopAI/vibe-kanban

version: "1.0"

project:
  name: "Echoelmusic"
  description: "Bio-Reactive DAW with AGI-Ready AI"
  repository: "vibrationalforce/Echoelmusic"

# Agent Configuration
agents:
  default_agent: "claude-code"

  available_agents:
    - name: "claude-code"
      command: "claude"
      args: ["--dangerously-skip-permissions"]

    - name: "gemini-cli"
      command: "gemini"
      args: []

    - name: "codex"
      command: "codex"
      args: ["--full-auto"]

# Task Isolation
isolation:
  use_worktrees: true
  auto_create_branch: true
  branch_prefix: "vibe/"
  auto_pr: true

# Parallel Execution
execution:
  max_parallel_agents: 4
  timeout_minutes: 30
  retry_on_failure: true
  max_retries: 2

# MCP Servers for All Agents
mcp_servers:
  - name: "filesystem"
    command: "npx"
    args: ["-y", "@anthropic/mcp-server-filesystem", "/home/user/Echoelmusic"]

  - name: "git"
    command: "npx"
    args: ["-y", "@anthropic/mcp-server-git"]

# Task Templates
task_templates:
  feature:
    columns: ["Backlog", "In Progress", "Review", "Done"]
    default_agent: "claude-code"
    auto_test: true

  bugfix:
    columns: ["Reported", "Investigating", "Fixing", "Verified"]
    default_agent: "claude-code"
    priority: "high"

  refactor:
    columns: ["Identified", "Planning", "Refactoring", "Testing"]
    default_agent: "gemini-cli"
    requires_approval: true

# Echoelmusic-Specific Task Queues
boards:
  - name: "Core DSP"
    path: "Sources/DSP/**"
    agents: ["claude-code"]
    tasks:
      - "Optimize SIMD processing"
      - "Add new effect processors"
      - "Fix audio glitches"

  - name: "AI/ML Systems"
    path: "Sources/AI/**"
    agents: ["claude-code", "gemini-cli"]
    parallel: true
    tasks:
      - "Improve LLM integration"
      - "Train neural models"
      - "Optimize inference latency"

  - name: "UI/UX"
    path: "Sources/UI/**"
    agents: ["claude-code"]
    tasks:
      - "Implement new components"
      - "Fix layout issues"
      - "Add animations"

  - name: "Platform"
    path: "Sources/Platform/**"
    agents: ["claude-code"]
    tasks:
      - "iOS optimization"
      - "Android audio fixes"
      - "Windows ASIO support"

  - name: "Synthesis"
    path: "Sources/Synthesis/**"
    agents: ["claude-code", "gemini-cli"]
    parallel: true
    tasks:
      - "Add new oscillators"
      - "Improve wavetable engine"
      - "Neural synthesis integration"

# Project Rules (shared across all agents)
project_rules:
  - "Use JUCE framework for all audio code"
  - "Follow C++17 standards"
  - "All DSP must be SIMD-optimized"
  - "No blocking operations in audio thread"
  - "Test on macOS, Windows, Linux, iOS, Android"
  - "Keep latency under 10ms for real-time features"
  - "Use lock-free data structures for audio"

# Auto-Testing Configuration
testing:
  pre_commit:
    - "cmake --build build"
    - "ctest --test-dir build"

  post_task:
    - "clang-format --dry-run -Werror Sources/**/*.cpp"
    - "clang-tidy Sources/**/*.cpp"

# GitHub Integration
github:
  auto_create_pr: true
  pr_template: |
    ## Summary
    {task_description}

    ## Changes
    {file_changes}

    ## Agent
    Generated by: {agent_name}
    Task ID: {task_id}

    ## Test Plan
    - [ ] Build passes
    - [ ] Tests pass
    - [ ] Manual testing completed

  reviewers:
    - "vibrationalforce"

  labels:
    - "ai-generated"
    - "vibe-kanban"

# Notifications
notifications:
  on_task_complete: true
  on_task_failed: true
  on_pr_created: true
